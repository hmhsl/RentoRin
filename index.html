<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy 1 Year, Love!</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Gift Opening Screen -->
  <div id="gift-overlay">
    <div class="gift-box" id="gift-box">
      <div class="ribbon">ğŸ€</div>
      <p>ğŸ You have a surprise from Laurent...</p>
      <button onclick="openGift()">Open Gift</button>
    </div>
  </div>

  <canvas id="confetti-canvas"></canvas>

  <div class="hearts">
    <div class="heart small slow"></div>
    <div class="heart medium fast"></div>
    <div class="heart tiny slow"></div>
    <div class="heart large medium"></div>
    <div class="heart medium slow"></div>
    <div class="heart small fast"></div>
    <div class="heart tiny medium"></div>
  </div>

  <button class="dark-mode-button" onclick="toggleDarkMode()">ğŸŒ™ Toggle Dark Mode</button>

  <div class="music-player">
    <div class="now-playing">ğŸµ Now Playing: Our Song</div>
    <audio id="love-song" src="music/your-song.mp3" loop></audio>
    <div class="controls">
      <button id="play-pause-button" onclick="togglePlayPause()">â–¶ï¸</button>
      <button onclick="stopSong()">â¹ï¸</button>
    </div>
    <input type="range" id="progress" value="0" max="100">
    <div class="music-note" id="music-note">ğŸ¶</div>
  </div>

  <div class="container fade-in">
    <header>
      <h1>Happy 1-Year Anniversary!</h1>
      <p>To the most amazing girl in the world</p>
    </header>

    <main>
      <section class="intro">
        <p>This little site is my love letter to youâ€”filled with our memories, my favorite things about you, and the cutest little facts about â€œus.â€ â¤ï¸</p>
      </section>

      <section class="photo-album">
        <h2>Our Favorite Memories ğŸ“¸</h2>
        <div class="album-grid">
          <img src="images/photo1.jpg" alt="Memory 1">
          <img src="images/photo2.jpg" alt="Memory 2">
          <img src="images/photo3.jpg" alt="Memory 3">
          <img src="images/photo4.jpg" alt="Memory 4">
        </div>
      </section>

      <nav class="nav-buttons">
        <a href="logbook.html">Date Logbook</a>
        <a href="favorites.html">My Favorite Things</a>
        <a href="stats.html">Fun Facts</a>
        <a href="gallery.html">Photo Gallery</a>
        <a href="notes.html">Little Notes</a>
      </nav>
    </main>

    <footer>
      <p>Made with love by Laurent ğŸ’•</p>
    </footer>
  </div>

  <script>
    const song = document.getElementById('love-song');
    const progress = document.getElementById('progress');
    const playPauseButton = document.getElementById('play-pause-button');
    const musicNote = document.getElementById('music-note');

    function togglePlayPause() {
      if (song.paused) {
        song.play();
        playPauseButton.innerHTML = 'â¸ï¸';
        musicNote.style.opacity = '1';
      } else {
        song.pause();
        playPauseButton.innerHTML = 'â–¶ï¸';
        musicNote.style.opacity = '0';
      }
    }

    function stopSong() {
      song.pause();
      song.currentTime = 0;
      playPauseButton.innerHTML = 'â–¶ï¸';
      musicNote.style.opacity = '0';
    }

    song.addEventListener('timeupdate', () => {
      const percentage = (song.currentTime / song.duration) * 100;
      progress.value = percentage;
    });

    progress.addEventListener('input', () => {
      const seekTime = (progress.value / 100) * song.duration;
      song.currentTime = seekTime;
    });

    song.addEventListener('ended', () => {
      playPauseButton.innerHTML = 'â–¶ï¸';
      musicNote.style.opacity = '0';
    });

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      document.querySelector('.container').classList.toggle('dark-mode');
      document.querySelector('.music-player').classList.toggle('dark-mode');
      document.querySelector('.dark-mode-button').classList.toggle('dark-mode');
      const nowPlaying = document.querySelector('.now-playing');
      nowPlaying.classList.toggle('dark-mode');
      const photoAlbum = document.querySelector('.photo-album');
      if (photoAlbum) {
        photoAlbum.classList.toggle('dark-mode');
      }
    }

    function openGift() {
      const box = document.getElementById('gift-box');
      box.classList.add('open');

      setTimeout(() => {
        document.getElementById('gift-overlay').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('gift-overlay').style.display = 'none';
        }, 1000);
        startConfetti();
        song.play();
        playPauseButton.innerHTML = 'â¸ï¸';
        musicNote.style.opacity = '1';
      }, 800);
    }

    // Confetti
    function startConfetti() {
      const canvas = document.getElementById('confetti-canvas');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const ctx = canvas.getContext('2d');
      const confetti = Array.from({length: 150}, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        r: Math.random() * 6 + 4,
        d: Math.random() * 40 + 10,
        color: `hsl(${Math.random() * 360}, 100%, 70%)`,
        tilt: Math.random() * 10 - 10
      }));

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        confetti.forEach(p => {
          ctx.beginPath();
          ctx.lineWidth = p.r;
          ctx.strokeStyle = p.color;
          ctx.moveTo(p.x + p.tilt, p.y);
          ctx.lineTo(p.x + p.tilt + p.r, p.y + p.r);
          ctx.stroke();
        });
        update();
      }

      function update() {
        confetti.forEach(p => {
          p.y += Math.cos(p.d) + 2;
          p.tilt += Math.sin(p.d) * 0.5;
          if (p.y > canvas.height) {
            p.y = -10;
            p.x = Math.random() * canvas.width;
          }
        });
      }

      setInterval(draw, 20);
    }
  </script>
</body>
</html>
